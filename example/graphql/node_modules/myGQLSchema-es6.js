// Not available in Node.js yet in any version:

/*
import {
  GraphQLSchema,
  GraphQLObjectType,
  GraphQLString,
  GraphQLID,
  GraphQLNonNull
} from 'graphql';
*/

// Available from Node.js v6.x:

/*
var {
  GraphQLSchema,
  GraphQLObjectType,
  GraphQLString,
  GraphQLID,
  GraphQLNonNull
} = require('graphql');
*/

// Available prior to Node.js 6.x:

var graphql = require('graphql');
var GraphQLSchema = graphql.GraphQLSchema;
var GraphQLObjectType = graphql.GraphQLObjectType;
var GraphQLString = graphql.GraphQLString;
var GraphQLID = graphql.GraphQLID;
var GraphQLNonNull = graphql.GraphQLNonNull;


var Patient = new GraphQLObjectType({
    name: 'Patient',
    fields: () => ({
        id: {
          type: GraphQLID
        },
        name: {
          type: GraphQLString
        },
        town: {
          type: GraphQLString
        },
        country: {
          type: GraphQLString
        },
    })
});

var Query = new GraphQLObjectType({
  name: 'Query',
  fields: () => ({
      patient: {
        type: Patient,
        args: {
          id: {
            type: new GraphQLNonNull(GraphQLID)
          }
        },
        description: 'Patient Object',
        resolve: function resolve(parent, args, context) {
          var id = args.id;
          var dataGlo = new context.q.documentStore.DocumentNode('gqlTestData', [id]);
          var data = dataGlo.getDocument();
          data.id = id;
          return data;
        }
      }
  })
});

const Schema = new GraphQLSchema({
  query: Query
});

//export default Schema;
module.exports = {
  Schema: Schema
};

